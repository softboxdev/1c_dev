
---

### **Битрикс — Архитектура продукта. Сайт. Шаблоны**

Эта тема охватывает ключевые аспекты визуального представления и технической организации сайта в системе «1С-Битрикс: Управление сайтом». Понимание этих принципов критически важно для эффективной разработки и поддержки проекта.

---

### **1. Понятие шаблона сайта**

**Шаблон сайта** в Битрикс — это набор файлов (PHP, HTML, CSS, JavaScript, изображения), которые определяют **внешний вид и структуру** страниц, не влияя на их содержимое (контент).

*   **Простая аналогия:** Представьте, что контент сайта (тексты, товары, новости) — это мебель в доме, а шаблон — это сам дом: его планировка, цвет стен, расположение окон и дверей. Вы можете менять мебель (контент), не перестраивая дом (шаблон).
*   **Основная задача:** Разделить логику (работу с данными) и представление (отображение для пользователя). Это позволяет:
    *   Менять дизайн сайта, не трогая его содержимое.
    *   Использовать разные шаблоны для разных разделов сайта (например, для главной страницы — один шаблон, для интернет-магазина — другой, для блога — третий).
    *   Ускорять разработку за счет переиспользования компонентов.

---

### **2. Основные элементы шаблона сайта**

Стандартный шаблон состоит из нескольких ключевых элементов:

1.  **`header.php`** — Верхняя часть страницы («шапка»).
    *   Содержит: HTML-разметку `<head>` (мета-теги, подключение CSS/JS), логотип, главное меню, поисковую строку и т.д.
2.  **`footer.php`** — Нижняя часть страницы («подвал»).
    *   Содержит: copyright, дополнительное меню, контактную информацию, скрипты аналитики.
3.  **`template_styles.css`** — Основной файл стилей (CSS) для данного шаблона.
4.  **`page_templates/`** — Папка с шаблонами отдельных типов страниц.
    *   Например, `landing.php` — шаблон для посадочной страницы без «шапки» и «подвала».
5.  **`description.php`** — Файл с описанием шаблона. Название и изображение-превью, которые отображаются при выборе шаблона в административной части.
6.  **Компоненты Битрикс** — В файлы `header.php` и `footer.php`, а также в основную часть страницы, вставляются компоненты (например, `bitrix:menu`, `bitrix:search.title`, `bitrix:news.list`), которые отвечают за вывод динамического содержимого.

**Принцип работы:** Когда пользователь заходит на страницу, система «склеивает» контент из базы данных с файлами шаблона. Сначала подключается `header.php`, затем выводится основной контент страницы, и в конце — `footer.php`.

---

### **3. Архитектура продукта (в контексте шаблонов и сайтов)**

Битрикс — это модульная система. В контексте сайтов и шаблонов ключевыми являются следующие модули и концепции:

*   **Модуль «Информационные блоки»:** Хранит основной контент (новости, статьи, товары, каталоги). Шаблон обращается к этому модулю через компоненты, чтобы отобразить данные.
*   **Модуль «Сайты» (в многосайтовости):** Позволяет управлять несколькими сайтами из одной установки Битрикс. Для каждого сайта можно назначить **свой собственный шаблон**.
*   **Компонентная архитектура:** Вся логика отображения инкапсулирована в **компоненты**. Шаблон — это «рама», в которую вставляются эти компоненты. Это позволяет разрабатывать и тестировать части страницы независимо друг от друга.
*   **Виртуальная файловая система (/bitrix/):** Ядро системы, модули и служебные файлы находятся в папке `/bitrix/`. **Эту папку нельзя изменять** при обновлении системы.

---

### **4. Структура файлов**

Файловая структура типичного сайта на Битрикс выглядит так:

```
/bitrix/          # Ядро системы, модули, админка. НЕ РЕДАКТИРУЕТСЯ!
/upload/          # Файлы, загруженные через систему (изображения, документы)
/local/           # Рекомендуемая папка для кастомной разработки (сайт-специфичные файлы)
    /components/  # Ваши переопределенные или собственные компоненты
    /templates/   # ПАПКА С ШАБЛОНАМИ САЙТА
        /.default # Шаблон по умолчанию для всего сайта
            /components/  # Шаблоны компонентов для данного визуального оформления
            header.php
            footer.php
            styles.css
            description.php
        /landing  # Еще один шаблон (например, для лендингов)
            header.php
            footer.php
            styles.css
            description.php
    /php_interface/ # Файлы инициализации, обработчики событий
    /modules/       # Собственные модули (если нужны)
```

**Важные моменты:**

*   Папка **`/local/templates/`** — это правильное место для размещения ваших шаблонов.
*   Имя папки шаблона (например, `.default` или `landing`) — это его технический идентификатор.
*   Шаблон `.default` является шаблоном по умолчанию. Если для страницы не указан другой шаблон, будет использован он.
*   В папке шаблона может быть своя папка `components/`, где хранятся визуальные шаблоны стандартных компонентов, адаптированные под дизайн этого сайта.

---

### **5. Права доступа**

Права доступа в Битрикс — это многоуровневая система.

1.  **Права на доступ к файлам на сервере (Файловая система):**
    *   Папки `/bitrix/`, `/upload/` должны быть доступны для чтения и записи веб-серверу (пользователю `www-data`, `apache` и т.д.).
    *   Папка `/local/` и её подпапки (включая шаблоны) также должны иметь права на чтение и запись для корректной работы компонентов и резервного копирования.

2.  **Права внутри системы Битрикс (Профили доступа):**
    *   Это права на действия внутри административной части. Они назначаются пользователям через **«Группы прав»** или **«Профили доступа»**.
    *   В контексте работы с шаблонами важны права для:
        *   **«Главный редактор» / «Редактор»:** Могут менять шаблон страницы в визуальном редакторе (для конкретной страницы), но не имеют доступа к файлам шаблона.
        *   **«Дизайнер»:** Имеет полный доступ к разделу «Дизайн» -> «Шаблоны сайта» -> «Редактирование шаблона» в админке. Может редактировать PHP/HTML/CSS-код шаблона прямо через веб-интерфейс.
        *   **«Администратор» / «Разработчик»:** Имеют полные права, включая доступ к файловой структуре через FTP/SSH и ко всем настройкам в админке.

**Ключевой принцип разделения:** Разработчик работает с файлами шаблона напрямую на сервере (через IDE). Дизайнер или контент-менеджер может настраивать внешний вид через удобный интерфейс админки, но в рамках предоставленных ему прав (например, меняя только цвета и шрифты через визуальные настройки, а не через код).

### **Итог**

Понимание архитектуры шаблонов в Битрикс позволяет четко разделить обязанности в команде, эффективно управлять внешним видом сайта и вносить изменения, не нарушая его работоспособность. **Шаблон — это мост между данными в системе и тем, что видит конечный пользователь.**