# Руководство по работе с Postman для тестирования веб-сервисов 1С на Windows 11

## 1. Установка и настройка Postman

### Установка Postman
1. Скачайте Postman с официального сайта: https://www.postman.com/downloads/
2. Запустите установщик и следуйте инструкциям
3. После установки создайте учетную запись или войдите в существующую

### Базовая настройка Postman
1. Создайте новое рабочее пространство (Workspace)
2. Настройте окружение (Environment) для хранения переменных

## 2. Настройка 1С для работы с веб-сервисами

### В конфигураторе 1С:
1. Откройте конфигурацию
2. Добавьте общие модули с признаком "Веб-сервис"
3. В свойствах модуля укажите пространство имен (Namespace)
4. Опубликуйте веб-сервисы через меню "Администрирование" → "Публикация веб-сервисов"

### Пример кода веб-сервиса в 1С:
```bsl
// Общий модуль "ВебСервисыДемо"

// Веб-сервисная функция
Функция ПолучитьДанныеКонтрагента(КодКонтрагента) Экспорт
    // Ваш код здесь
КонецФункции

// Веб-сервисная процедура
Процедура ОбновитьДанныеКонтрагента(ДанныеКонтрагента) Экспорт
    // Ваш код здесь
КонецПроцедуры
```

## 3. Основы работы с Postman

### Создание первого запроса
1. Нажмите "+" для создания нового запроса
2. Выберите метод (GET, POST, PUT, DELETE)
3. Укажите URL веб-сервиса

### Структура URL для 1С веб-сервисов:
```
http://сервер:порт/база/ws/имя_веб_сервиса?wsdl
http://localhost/hrm/ws/ВебСервисыДемо?wsdl
```

## 4. Работа с SOAP запросами

### Получение WSDL описания
1. Метод: GET
2. URL: `http://ваш_сервер/ваша_база/ws/имя_веб_сервиса?wsdl`

### Пример SOAP запроса для вызова метода:
```xml
POST /hrm/ws/ВебСервисыДемо HTTP/1.1
Host: localhost
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://ваш_namespace/ВебСервисыДемо#ПолучитьДанныеКонтрагента"

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/">
    <soap:Body>
        <ПолучитьДанныеКонтрагента xmlns="http://ваш_namespace/">
            <КодКонтрагента>000000001</КодКонтрагента>
        </ПолучитьДанныеКонтрагента>
    </soap:Body>
</soap:Envelope>
```

## 5. Работа с REST сервисами (если настроены в 1С)

### Пример GET запроса:
```
GET http://localhost/hrm/hs/rest/контрагенты/000000001
Authorization: Basic base64(логин:пароль)
```

### Пример POST запроса:
```json
POST http://localhost/hrm/hs/rest/контрагенты
Content-Type: application/json
Authorization: Basic base64(логин:пароль)

{
    "Код": "000000002",
    "Наименование": "ООО Пример",
    "ИНН": "1234567890"
}
```

## 6. Настройка авторизации

### Basic Authentication:
1. Во вкладке "Authorization"
2. Тип: "Basic Auth"
3. Укажите логин и пароль пользователя 1С

### В заголовках запроса:
```
Authorization: Basic base64(логин:пароль)
```

## 7. Создание коллекций и окружений

### Создание коллекции:
1. Нажмите "New" → "Collection"
2. Дайте имя коллекции
3. Добавьте описание

### Настройка окружения:
1. Нажмите "New" → "Environment"
2. Добавьте переменные:
   - `base_url`: http://localhost/hrm
   - `username`: ваш_логин
   - `password`: ваш_пароль

## 8. Использование переменных

### В URL:
```
{{base_url}}/ws/ВебСервисыДемо
```

### В теле запроса:
```xml
<КодКонтрагента>{{client_code}}</КодКонтрагента>
```

## 9. Тестирование ответов

### Написание тестов в Postman:
```javascript
// Проверка статуса ответа
pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});

// Проверка содержимого ответа
pm.test("Response contains expected data", function () {
    var response = pm.response.text();
    pm.expect(response).to.include("успешно");
});

// Сохранение данных в переменные
var jsonData = pm.response.json();
pm.environment.set("session_id", jsonData.session_id);
```

## 10. Автоматизация тестирования

### Создание сценариев:
1. Используйте коллекции для группировки запросов
2. Настройте последовательность выполнения
3. Добавьте задержки между запросами при необходимости

### Запуск коллекции:
1. Откройте коллекцию
2. Нажмите "Run"
3. Выберите нужные запросы
4. Запустите выполнение

## 11. Отладка и решение проблем

### Частые проблемы:
1. **Ошибка 401** - проверьте авторизацию
2. **Ошибка 404** - проверьте URL и публикацию веб-сервиса
3. **Ошибка 500** - проверьте код веб-сервиса в 1С

### Инструменты отладки:
1. Console в Postman (View → Show Postman Console)
2. Логи 1С сервера
3. Сетевые инструменты Windows

## 12. Полезные советы

### Для новичков:
1. Начинайте с простых GET запросов
2. Сохраняйте успешные запросы в коллекции
3. Используйте описания для запросов
4. Экспортируйте коллекции для резервного копирования

### Оптимизация работы:
1. Используйте environments для разных серверов
2. Создайте шаблоны запросов
3. Настройте Pre-request Script для автоматической авторизации

## Пример готового запроса

### Получение данных контрагента:
```http
POST http://localhost/hrm/ws/ВебСервисыДемо
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://tempuri.org/ВебСервисыДемо#ПолучитьДанныеКонтрагента"
Authorization: Basic dXNlcjpwYXNzd29yZA==

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/">
    <soap:Body>
        <ПолучитьДанныеКонтрагента xmlns="http://tempuri.org/">
            <КодКонтрагента>000000001</КодКонтрагента>
        </ПолучитьДанныеКонтрагента>
    </soap:Body>
</soap:Envelope>
```

Это руководство поможет вам начать работу с Postman для тестирования веб-сервисов 1С. Начинайте с простых запросов и постепенно переходите к более сложным сценариям.